<!DOCTYPE html>
<html xmlns:layout="http://www.w3.org/1999/xhtml" xmlns:th="http://www.w3.org/1999/xhtml" layout:decorate="~{layout}">

<head>
  <meta charset="UTF-8">
  <title>Lista de Usuários</title>
  <link rel="stylesheet" th:href="@{/css/listar-pessoa.css}" th:fragment="css"></link>
</head>

<body>
  <main class="container" layout:fragment="main">
    <div class="row justify-content-md-center">
      <h1>Lista de Pessoas</h1>

      <div>
        <h3 th:if="${pessoas.empty}">Sem Pessoas Cadastradas!</h3>
      </div>

      <table class="table table-striped " id="table1" th:if="${!pessoas.empty}">
        <thead>
          <tr>
            <th class="cpf">CPF</th>
            <th>Nome</th>
            <th class="acoes">Ações</th>
          </tr>
        </thead>
        <tbody>
          <tr th:each="pessoa : ${pessoas}">
            <td><span th:text="${pessoa.cpf}"> CPF </span></td>
            <td><span th:text="${pessoa.nome}"> Nome </span></td>

            <td>
              <button class="btn btn-warning btn-sm me-2" id="btn-editar"
                th:onclick="editarModal([[${pessoa.id}]],[[${pessoa.nome}]])">
                <span style="font-size: 15px; color: rgb(35, 39, 43);">
                  <i class="fa-regular fa-pen-to-square"></i>
                </span>
              </button>

              <button class="btn btn-danger btn-sm me-2" id="btn-apagar"
                th:onclick="apagarModal([[${pessoa.id}]],[[${pessoa.nome}]])">
                <span style="font-size: 15px; color: rgb(35, 39, 43);">
                  <i class="fa-solid fa-trash"></i>
                </span>
              </button>

              <a class="btn btn-info btn-sm" href="" id="btn-dependente"
                th:href="@{/dependente/listar/{id}(id=${pessoa.id})}">
                <span style="font-size: 15px">
                  Dependentes
                </span>
              </a>
            </td>
          </tr>
        </tbody>
        <tfoot>
          <tr>
            <th>CPF</th>
            <th>Nome</th>
            <th>Ações</th>
          </tr>
        </tfoot>
      </table>

      <!-- Modal -->

      <div class="modal fade" id="editar" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="staticBackdropLabel">Confirmação</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              Realmente Deseja Editar <strong id="bold-nome-editar"></strong> ?
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancelar</button>
              <a type="button" class="btn btn-success" id="btn-editar-confirmar">Confirmar</a>
            </div>
          </div>
        </div>
      </div>

      <div class="modal fade" id="apagar" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="staticBackdropLabel">Confirmação</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              Realmente Deseja Apagar <strong id="bold-nome-apagar"></strong> ?
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancelar</button>
              <a type="button" class="btn btn-success" id="btn-apagar-confirmar">Confirmar</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
  <script type="text/javascript" th:fragment="js"></script>
  <script th:inline="javascript" th:fragment="inlinescript"></script>
  <div th:insert="fragments/datatable/scripts :: listar-pessoas" layout:fragment="script"></div>
</body>

<!--datable implements-->


</html>